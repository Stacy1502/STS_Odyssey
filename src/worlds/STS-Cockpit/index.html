<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
   

    <!-- Circles' head scripts [REQUIRED] -->
    
    <circles-start-scripts/>
  </head>

  <body>
    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>


    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties change-costume>
      <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
      

      <!-- assets -->
      <a-assets timeout="10000">
        <a-camera position="0 1.4 3" rotation="-1 0 0"></a-camera>
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- ADDED STUFF -->
      <!-- CHARACTER -->
      <script src="./customavatar.js"></script>

      <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
      <!-- ambient music/sound -->
      <a-entity circles-sound="type:music; src:./assets/K. Leimer - Very Tired.mp3; autoplay:true; loop:true;"></a-entity>
      
      <!-- //start the ambient sounds
      const ambientSounds = document.querySelectorAll('.ambient-music');
      ambientSounds.forEach(function(soundEntity)
      {
          soundEntity.components['sound'].playSound();
      }
      ) -->
          <!-- IMAGES -->
          <img id="ui" src="./assets/images/ui.png" crossorigin="anonymous">
          <img id="sky" src="./assets/images/black stars.jpg">
          <img id="floor" src="./assets/images/floor.jpg">
          <img id="panel3" src=" ./assets/images/panel 3.png">
          <img id="panel1" src=" ./assets/images/panel 1.png">
          <img id="panel2" src=" ./assets/images/middle.png">
          <img id="panel4" src=" ./assets/images/dash.png">
          <img id="backwall" src="./assets/images/backwall.jpg">
          <img id="backwall" src="./assets/images/backwall.jpg">
          <img id="wall" src="./assets/images/wall1.jpg">
         
          <!-- 3D MODELS -->
          <a-asset-item id="Cockpit" response-type="arraybuffer" src="./assets/models/cockpit/version3.gltf"></a-asset-item>   
          <a-asset-item id="wall1"  response-type="arraybuffer" src="./assets/models/metalwall/scene.gltf"></a-asset-item>   
          <a-asset-item id="wall2"  response-type="arraybuffer" src="./assets/models/green/scene.gltf"></a-asset-item>   
          
        </a-assets>

         <!-- LIGHT -->
         <a-entity id="ambient" light="color: #eadac2; intensity: 0.420; type: ambient"></a-entity>

        <!-- MAIN ROOM -->
         <a-entity id="cockpit" gltf-model="#Cockpit" position="0 0.04057 0" rotation=""></a-entity>
     
         <!-- CHECKPOINTS -->

         <a-entity circles-checkpoint position="0.476 0 3.197"></a-entity>
         <a-entity circles-checkpoint position="1.242 0 -1.065" material="color: #005bf4;"></a-entity>
         <a-entity circles-checkpoint position="-0.547 0 -1.076" material="color: #005bf4;"></a-entity>

         <!-- NAVMESh -->
         <a-entity id="navmesh" gltf-model="./assets/models/navmesh.gltf"
          nav-mesh visible="false"></a-entity>

       <!-- BACKGROUND -->

        <a-entity light="color: #9eb1ff; intensity: 3.4; penumbra: 0.7; type: point" id="point" position="0 2.282 0"></a-entity>
        <a-entity light="color: #f09b56; intensity: 0.9; type: hemisphere" id="light"></a-entity>
        <a-entity geometry="primitive: plane" rotation="-90 0 0" material="src:#floor;" id="ground" scale="7.18939 8.86967 8.109" position="0 0  0.578"></a-entity>
        <a-sky animation="property: object3D.rotation.x; to: -360; loop: true; easing: linear; dur: 96000" id="#skydome" src="#sky"></a-sky>

        <!-- photo consoles -->
        <a-entity geometry="" position="0.21595 2.64001 -0.51494" scale="1.97742 0.07465 2.6487" rotation="" material="src: #panel1; color: #616161;" id="panel1-2"></a-entity>
        <a-entity geometry="" position="0.191 2.33052 -2.58551" scale="2.2227 0.07812 1.27871" rotation="-28.62611736032619 0 0" material="src: #panel3; color: #616161;" id="panel1"></a-entity>
        <a-entity geometry="" position="0.28228 0.64939 -1.34556" scale="0.62407 0.078 2.09625" rotation="9.38218389526723 0 0" material="src: #panel2; color: #616161;" id="panel1-3"></a-entity>

        <a-entity geometry="" position="0.318 1.48037 4.553" scale="7.07093 0.118 3.46484" rotation="90 90 90" material="src: #backwall;" id="panel1-4"></a-entity>

        <a-entity geometry="" position="-2.011 0.70655 -0.21468" scale="4.21103 0.01654 0.901" rotation="21.598217045251513 90.00021045914971 0" material="src: #panel4; color: #616161;" id="panel1-3"></a-entity>
        <a-entity geometry="" position="2.58599 0.707 -0.215" scale="4.211 0.017 0.901" rotation="-21 90 180" material="src: #panel4; color: #616161" id="panel1-5"></a-entity>
   
        <a-entity geometry="" position="3.20903 1.48037 2.19148" scale="7.07093 0.118 3.46484" rotation="90 0 90" material="src: #wall;  color: #969696" id="panel1-7"></a-entity>
        <a-entity geometry="" position="-3.04088 1.48037 2.26084" scale="7.07093 0.118 3.46484" rotation="90 0 90" material="src: #wall;  color: #969696" id="panel1-7"></a-entity>
   
        <!-- PORTAL -->
        <a-entity scale="0.7 0.7 0.7" position="1.957 0.908 3.234" id="Portal-Lobby" circles-portal="title_text: Back to Lobby; link_url: #"><a-entity class="portal interactive" material="src: /global/assets/textures/equirectangular/WhiteBlue.jpg; shader: flat" geometry="primitive: sphere; radius: 0.5; segmentsWidth: 10; segmentsHeight: 10" circles-interactive-object="type: outline; neutral_scale: 1.1; hover_scale: 1.15; click_scale: 1.15" scale="" circles-material-extend-fresnel="fresnelOpacity: 0" sound="volume: 0.5"><a-entity class="object_highlight" geometry="primitive: sphere; radius: 0.5; segmentsWidth: 10; segmentsHeight: 10" material="color: rgb(255,255,255); shader: flat; side: back" scale="1.1 1.1 1.1" shadow="cast: false; receive: false" visible=""></a-entity></a-entity><a-entity class="title" position="0 1 0" rotation="0 180 0" text="value: Back to Lobby; align: center; width: 5"></a-entity></a-entity>
 
      </a-scene>

    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
  </body>
</html>
